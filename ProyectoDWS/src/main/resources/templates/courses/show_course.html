<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/layout :: head('Detalles del Curso - AcademiaSaber', '/styles/courses/show_course.css')"></head>
<body>
<div th:replace="layout/layout :: header"></div>
<main>
    <h1 th:text="${course.title}"></h1>
    <p th:text="${course.description}"></p>
    <p><strong>Asignaturas:</strong></p>
    <ul>
        <li th:each="subject : ${course.subjects}" th:text="${subject.title}"></li>
    </ul>

    <!-- Action buttons -->
    <a th:href="@{/course/{id}/edit(id=${course.id})}">Editar</a> |
    <form th:action="@{/course/{id}/delete(id=${course.id})}" method="post">
        <button type="submit">Eliminar</button>
    </form> |
    <form th:if="${!enrolledStudents.contains(user)}" th:action="@{/course/{id}/enroll(id=${course.id})}" method="post">
        <button type="submit">Inscribirse</button>
    </form>

    <h2>Comentarios</h2>
    <ul>
        <li th:each="comment : ${comments}">
            <!-- Show the author's name and comment -->
            <p><strong th:text="${comment.user.username}">Usuario</strong>: <span th:text="${comment.text}"></span></p>
            <!-- Button to delete the comment -->
            <form th:action="@{/course/{courseId}/comments/{commentId}/delete(courseId=${course.id}, commentId=${comment.id})}" method="post">
                <button type="submit">Eliminar</button>
            </form>
        </li>
    </ul>

    <h3>AÃ±adir comentario</h3>
    <!-- Form to add new comments -->
    <form th:action="@{/course/{id}/comments/new(id=${course.id})}" method="post">
        <textarea name="text" rows="3" cols="40" required></textarea><br/>
        <button type="submit">Enviar comentario</button>
    </form>

    <br/>
    <a href="/courses">Volver a cursos</a>
</main>
<div th:replace="layout/layout :: footer"></div>
</body>
</html>
